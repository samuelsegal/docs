/*! For license information please see canvasDraw.bundle.js.LICENSE.txt */
(()=>{"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])})(t,e)};function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function e(n,t){var e,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(n,u)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function r(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(n,t){var e="function"==typeof Symbol&&n[Symbol.iterator];if(!e)return n;var r,o,i=e.call(n),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(n){o={error:n}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return u}function i(n,t){for(var e=0,r=t.length,o=n.length;e<r;e++,o++)n[o]=t[e];return n}function u(n){return this instanceof u?(this.v=n,this):new u(n)}function c(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=e.apply(n,t||[]),i=[];return r={},c("next"),c("throw"),c("return"),r[Symbol.asyncIterator]=function(){return this},r;function c(n){o[n]&&(r[n]=function(t){return new Promise((function(e,r){i.push([n,t,e,r])>1||s(n,t)}))})}function s(n,t){try{(e=o[n](t)).value instanceof u?Promise.resolve(e.value.v).then(a,l):f(i[0][2],e)}catch(n){f(i[0][3],n)}var e}function a(n){s("next",n)}function l(n){s("throw",n)}function f(n,t){n(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function s(n){return"function"==typeof n}Object.create,Object.create;var a,l=((a=function(n){var t;t=this,Error.call(t),t.stack=(new Error).stack,this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map((function(n,t){return t+1+") "+n.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n}).prototype=Object.create(Error.prototype),a.prototype.constructor=a,a);function f(n,t){if(n){var e=n.indexOf(t);0<=e&&n.splice(e,1)}}var h=function(){function n(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._teardowns=null}return n.prototype.unsubscribe=function(){var n,t,e,u,c;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var f=r(a),h=f.next();!h.done;h=f.next())h.value.remove(this)}catch(t){n={error:t}}finally{try{h&&!h.done&&(t=f.return)&&t.call(f)}finally{if(n)throw n.error}}else a.remove(this);var d=this.initialTeardown;if(s(d))try{d()}catch(n){c=n instanceof l?n.errors:[n]}var v=this._teardowns;if(v){this._teardowns=null;try{for(var y=r(v),b=y.next();!b.done;b=y.next()){var w=b.value;try{p(w)}catch(n){c=null!=c?c:[],n instanceof l?c=i(i([],o(c)),o(n.errors)):c.push(n)}}}catch(n){e={error:n}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(e)throw e.error}}}if(c)throw new l(c)}},n.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)p(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}},n.prototype._hasParent=function(n){var t=this._parentage;return t===n||Array.isArray(t)&&t.includes(n)},n.prototype._addParent=function(n){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n},n.prototype._removeParent=function(n){var t=this._parentage;t===n?this._parentage=null:Array.isArray(t)&&f(t,n)},n.prototype.remove=function(t){var e=this._teardowns;e&&f(e,t),t instanceof n&&t._removeParent(this)},n.EMPTY=((t=new n).closed=!0,t),n;var t}();function d(n){return n instanceof h||n&&"closed"in n&&s(n.remove)&&s(n.add)&&s(n.unsubscribe)}function p(n){s(n)?n():n.unsubscribe()}h.EMPTY;var v=null,y=null,b=void 0,w=!1,m=!1,g={setTimeout:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=g.delegate;return((null==e?void 0:e.setTimeout)||setTimeout).apply(void 0,i([],o(n)))},clearTimeout:function(n){var t=g.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(n)},delegate:void 0};function _(n){g.setTimeout((function(){if(!v)throw n;v(n)}))}function x(){}var S=E("C",void 0,void 0);function E(n,t,e){return{kind:n,value:t,error:e}}var I=function(n){function e(t){var e=n.call(this)||this;return e.isStopped=!1,t?(e.destination=t,d(t)&&t.add(e)):e.destination=O,e}return t(e,n),e.create=function(n,t,e){return new T(n,t,e)},e.prototype.next=function(n){this.isStopped?P(function(n){return E("N",n,void 0)}(n),this):this._next(n)},e.prototype.error=function(n){this.isStopped?P(E("E",void 0,n),this):(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped?P(S,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(h),T=function(n){function e(t,e,r){var o,i=n.call(this)||this;if(s(t))o=t;else if(t){var u;o=t.next,e=t.error,r=t.complete,i&&m?(u=Object.create(t)).unsubscribe=function(){return i.unsubscribe()}:u=t,o=null==o?void 0:o.bind(u),e=null==e?void 0:e.bind(u),r=null==r?void 0:r.bind(u)}return i.destination={next:o?k(o,i):x,error:k(null!=e?e:A,i),complete:r?k(r,i):x},i}return t(e,n),e}(I);function k(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{n.apply(void 0,i([],o(e)))}catch(n){if(w){if(!t._syncErrorHack_isSubscribing)throw n;t.__syncError=n}else _(n)}}}function A(n){throw n}function P(n,t){var e=y;e&&g.setTimeout((function(){return e(n,t)}))}var O={closed:!0,next:x,error:A,complete:x},j="function"==typeof Symbol&&Symbol.observable||"@@observable";function L(n){return n}function C(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Y(n)}function Y(n){return 0===n.length?L:1===n.length?n[0]:function(t){return n.reduce((function(n,t){return t(n)}),t)}}var H=function(){function n(n){n&&(this._subscribe=n)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(n,t,e){var r,o=(r=n)&&r instanceof I||function(n){return n&&s(n.next)&&s(n.error)&&s(n.complete)}(r)&&d(r)?n:new T(n,t,e);if(w)this._deprecatedSyncErrorSubscribe(o);else{var i=this.operator,u=this.source;o.add(i?i.call(o,u):u?this._subscribe(o):this._trySubscribe(o))}return o},n.prototype._deprecatedSyncErrorSubscribe=function(n){var t=n;t._syncErrorHack_isSubscribing=!0;var e=this.operator;if(e)n.add(e.call(n,this.source));else try{n.add(this._subscribe(n))}catch(n){t.__syncError=n}for(var r=t;r;){if("__syncError"in r)try{throw r.__syncError}finally{n.unsubscribe()}r=r.destination}t._syncErrorHack_isSubscribing=!1},n.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(t){n.error(t)}},n.prototype.forEach=function(n,t){var e=this;return new(t=R(t))((function(t,r){var o;o=e.subscribe((function(t){try{n(t)}catch(n){r(n),null==o||o.unsubscribe()}}),r,t)}))},n.prototype._subscribe=function(n){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(n)},n.prototype[j]=function(){return this},n.prototype.pipe=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return n.length?Y(n)(this):this},n.prototype.toPromise=function(n){var t=this;return new(n=R(n))((function(n,e){var r;t.subscribe((function(n){return r=n}),(function(n){return e(n)}),(function(){return n(r)}))}))},n.create=function(t){return new n(t)},n}();function R(n){var t;return null!==(t=null!=n?n:b)&&void 0!==t?t:Promise}function N(n){return function(t){if(function(n){return s(null==n?void 0:n.lift)}(t))return t.lift((function(t){try{return n(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}var q=function(n){function e(t,e,r,o,i){var u=n.call(this,t)||this;return u.onFinalize=i,u._next=e?function(n){try{e(n)}catch(n){t.error(n)}}:n.prototype._next,u._error=o?function(n){try{o(n)}catch(n){t.error(n)}finally{this.unsubscribe()}}:n.prototype._error,u._complete=r?function(){try{r()}catch(n){t.error(n)}finally{this.unsubscribe()}}:n.prototype._complete,u}return t(e,n),e.prototype.unsubscribe=function(){var t,e=this.closed;n.prototype.unsubscribe.call(this),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))},e}(I);function z(n,t){return N((function(e,r){var o=0;e.subscribe(new q(r,(function(e){r.next(n.call(t,e,o++))})))}))}var B=function(n){return n&&"number"==typeof n.length&&"function"!=typeof n};function D(n){return s(null==n?void 0:n.then)}function F(n,t){return new H((function(e){var r=0;return t.schedule((function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())}))}))}var M="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function U(n,t){if(!n)throw new Error("Iterable cannot be null");return new H((function(e){var r=new h;return r.add(t.schedule((function(){var o=n[Symbol.asyncIterator]();r.add(t.schedule((function(){var n=this;o.next().then((function(t){t.done?e.complete():(e.next(t.value),n.schedule())}))})))}))),r}))}function G(n){return s(n[j])}function W(n){return s(null==n?void 0:n[M])}function X(n){return Symbol.asyncIterator&&s(null==n?void 0:n[Symbol.asyncIterator])}function J(n){return new TypeError("You provided "+(null!==n&&"object"==typeof n?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function K(n){return c(this,arguments,(function(){var t,r,o;return e(this,(function(e){switch(e.label){case 0:t=n.getReader(),e.label=1;case 1:e.trys.push([1,,9,10]),e.label=2;case 2:return[4,u(t.read())];case 3:return r=e.sent(),o=r.value,r.done?[4,u(void 0)]:[3,5];case 4:return[2,e.sent()];case 5:return[4,u(o)];case 6:return[4,e.sent()];case 7:return e.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function Q(n){return s(null==n?void 0:n.getReader)}function V(n){if(n instanceof H)return n;if(null!=n){if(G(n))return o=n,new H((function(n){var t=o[j]();if(s(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(B(n))return Z(n);if(D(n))return e=n,new H((function(n){e.then((function(t){n.closed||(n.next(t),n.complete())}),(function(t){return n.error(t)})).then(null,_)}));if(X(n))return $(n);if(W(n))return t=n,new H((function(n){var e,o;try{for(var i=r(t),u=i.next();!u.done;u=i.next()){var c=u.value;if(n.next(c),n.closed)return}}catch(n){e={error:n}}finally{try{u&&!u.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}n.complete()}));if(Q(n))return $(K(n))}var t,e,o;throw J(n)}function Z(n){return new H((function(t){for(var e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()}))}function $(n){return new H((function(t){(function(n,t){var o,i,u,c;return function(n,t,e,r){return new(e||(e=Promise))((function(o,i){function u(n){try{s(r.next(n))}catch(n){i(n)}}function c(n){try{s(r.throw(n))}catch(n){i(n)}}function s(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}s((r=r.apply(n,t||[])).next())}))}(this,void 0,void 0,(function(){var s,a;return e(this,(function(e){switch(e.label){case 0:e.trys.push([0,5,6,11]),o=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=r(n),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(e){t[e]=n[e]&&function(t){return new Promise((function(r,o){!function(n,t,e,r){Promise.resolve(r).then((function(t){n({value:t,done:e})}),t)}(r,o,(t=n[e](t)).done,t.value)}))}}}(n),e.label=1;case 1:return[4,o.next()];case 2:if((i=e.sent()).done)return[3,4];if(s=i.value,t.next(s),t.closed)return[2];e.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=e.sent(),u={error:a},[3,11];case 6:return e.trys.push([6,,9,10]),i&&!i.done&&(c=o.return)?[4,c.call(o)]:[3,8];case 7:e.sent(),e.label=8;case 8:return[3,10];case 9:if(u)throw u.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(n,t).catch((function(n){return t.error(n)}))}))}function nn(n,t,e){return void 0===e&&(e=1/0),s(t)?nn((function(e,r){return z((function(n,o){return t(e,n,r,o)}))(V(n(e,r)))}),e):("number"==typeof t&&(e=t),N((function(t,r){return function(n,t,e,r,o,i,u,c){var s=[],a=0,l=0,f=!1,h=function(){!f||s.length||a||t.complete()},d=function(n){return a<r?p(n):s.push(n)},p=function(n){a++;var o=!1;V(e(n,l++)).subscribe(new q(t,(function(n){t.next(n)}),(function(){o=!0}),void 0,(function(){if(o)try{a--;for(;s.length&&a<r;)n=void 0,n=s.shift(),p(n);h()}catch(n){t.error(n)}var n})))};return n.subscribe(new q(t,d,(function(){f=!0,h()}))),function(){}}(t,r,n,e)})))}var tn=Array.isArray;function en(n){return z((function(t){return function(n,t){return tn(t)?n.apply(void 0,i([],o(t))):n(t)}(n,t)}))}function rn(n,t){return t?F(n,t):Z(n)}var on=["addListener","removeListener"],un=["addEventListener","removeEventListener"],cn=["on","off"];function sn(n,t,e,r){if(s(e)&&(r=e,e=void 0),r)return sn(n,t,e).pipe(en(r));var i=o(function(n){return s(n.addEventListener)&&s(n.removeEventListener)}(n)?un.map((function(r){return function(o){return n[r](t,o,e)}})):function(n){return s(n.addListener)&&s(n.removeListener)}(n)?on.map(an(n,t)):function(n){return s(n.on)&&s(n.off)}(n)?cn.map(an(n,t)):[],2),u=i[0],c=i[1];if(!u&&B(n))return nn((function(n){return sn(n,t,e)}))(rn(n));if(!u)throw new TypeError("Invalid event target");return new H((function(n){var t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1<t.length?t:t[0])};return u(t),function(){return c(t)}}))}function an(n,t){return function(e){return function(r){return n[e](t,r)}}}function ln(n){return void 0===n&&(n=1/0),nn(L,n)}var fn=new H((function(n){return n.complete()}));function hn(n){return n&&s(n.schedule)}function dn(n){return n[n.length-1]}function pn(n){return s(dn(n))?n.pop():void 0}function vn(n){return hn(dn(n))?n.pop():void 0}function yn(n,t){return"number"==typeof dn(n)?n.pop():t}function bn(n,t,e){return void 0===e&&(e=L),function(r){wn(t,(function(){for(var o=n.length,i=new Array(o),u=o,c=o,a=function(o){wn(t,(function(){var a=function(n,t){return t?function(n,t){if(null!=n){if(G(n))return function(n,t){return new H((function(e){var r=new h;return r.add(t.schedule((function(){var o=n[j]();r.add(o.subscribe({next:function(n){r.add(t.schedule((function(){return e.next(n)})))},error:function(n){r.add(t.schedule((function(){return e.error(n)})))},complete:function(){r.add(t.schedule((function(){return e.complete()})))}}))}))),r}))}(n,t);if(B(n))return F(n,t);if(D(n))return function(n,t){return new H((function(e){return t.schedule((function(){return n.then((function(n){e.add(t.schedule((function(){e.next(n),e.add(t.schedule((function(){return e.complete()})))})))}),(function(n){e.add(t.schedule((function(){return e.error(n)})))}))}))}))}(n,t);if(X(n))return U(n,t);if(W(n))return function(n,t){return new H((function(e){var r;return e.add(t.schedule((function(){r=n[M](),function(n,t,e,r){void 0===r&&(r=0);var o=t.schedule((function(){try{e.call(this)}catch(t){n.error(t)}}),r);n.add(o)}(e,t,(function(){var n=r.next(),t=n.value;n.done?e.complete():(e.next(t),this.schedule())}))}))),function(){return s(null==r?void 0:r.return)&&r.return()}}))}(n,t);if(Q(n))return function(n,t){return U(K(n),t)}(n,t)}throw J(n)}(n,t):V(n)}(n[o],t),l=!1;a.subscribe(new q(r,(function(n){i[o]=n,l||(l=!0,c--),c||r.next(e(i.slice()))}),(function(){--u||r.complete()})))}),r)},l=0;l<o;l++)a(l)}),r)}}function wn(n,t,e){n?e.add(n.schedule(t)):t()}var mn=Array.isArray;function gn(n){return 1===n.length&&mn(n[0])?n[0]:n}function _n(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=pn(n);return e?C(_n.apply(void 0,i([],o(n))),en(e)):N((function(t,e){bn(i([t],o(gn(n))))(e)}))}var xn=function(n){function e(t,e){return n.call(this)||this}return t(e,n),e.prototype.schedule=function(n,t){return void 0===t&&(t=0),this},e}(h),Sn={setInterval:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=Sn.delegate;return((null==e?void 0:e.setInterval)||setInterval).apply(void 0,i([],o(n)))},clearInterval:function(n){var t=Sn.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(n)},delegate:void 0},En=function(n){function e(t,e){var r=n.call(this,t,e)||this;return r.scheduler=t,r.work=e,r.pending=!1,r}return t(e,n),e.prototype.schedule=function(n,t){if(void 0===t&&(t=0),this.closed)return this;this.state=n;var e=this.id,r=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(r,e,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},e.prototype.requestAsyncId=function(n,t,e){return void 0===e&&(e=0),Sn.setInterval(n.flush.bind(n,this),e)},e.prototype.recycleAsyncId=function(n,t,e){if(void 0===e&&(e=0),null!=e&&this.delay===e&&!1===this.pending)return t;Sn.clearInterval(t)},e.prototype.execute=function(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this._execute(n,t);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,t){var e,r=!1;try{this.work(n)}catch(n){r=!0,e=!!n&&n||new Error(n)}if(r)return this.unsubscribe(),e},e.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,e=this.scheduler,r=e.actions;this.work=this.state=this.scheduler=null,this.pending=!1,f(r,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},e}(xn),In={now:function(){return(In.delegate||Date).now()},delegate:void 0},Tn=function(){function n(t,e){void 0===e&&(e=n.now),this.schedulerActionCtor=t,this.now=e}return n.prototype.schedule=function(n,t,e){return void 0===t&&(t=0),new this.schedulerActionCtor(this,n).schedule(e,t)},n.now=In.now,n}(),kn=new(function(n){function e(t,e){void 0===e&&(e=Tn.now);var r=n.call(this,t,e)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return t(e,n),e.prototype.flush=function(n){var t=this.actions;if(this._active)t.push(n);else{var e;this._active=!0;do{if(e=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,e){for(;n=t.shift();)n.unsubscribe();throw e}}},e}(Tn))(En),An=kn;function Pn(){return ln(1)}function On(n){return n<=0?function(){return fn}:N((function(t,e){var r=0;t.subscribe(new q(e,(function(t){++r<=n&&(e.next(t),n<=r&&e.complete())})))}))}function jn(n,t){return t?function(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Pn()(rn(n,vn(n)))}(t.pipe(On(1),N((function(n,t){n.subscribe(new q(t,x))}))),e.pipe(jn(n)))}:nn((function(t,e){return n(t,e).pipe(On(1),function(n){return z((function(){return n}))}(t))}))}const Ln=document.getElementById("canvas"),Cn=Ln.getContext("2d");Cn.canvas.width=window.innerWidth,Cn.canvas.height=window.innerHeight;const Yn=(n,t)=>{const e=n.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}},Hn=sn(Ln,"mousedown").pipe(z((n=>({clickType:"mousedown",position:Yn(Ln,n)})))),Rn=sn(Ln,"mouseup").pipe(z((n=>({clickType:"mouseup",position:Yn(Ln,n)})))),Nn=sn(Ln,"mousemove").pipe(z((n=>Yn(Ln,n)))),qn=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=vn(n),r=yn(n,1/0),o=n;return o.length?1===o.length?V(o[0]):ln(r)(rn(o,e)):fn}(Hn,Rn).pipe(function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return _n.apply(void 0,i([],o(n)))}(Nn,(({clickType:n},t)=>({clickType:n,position:t})))).pipe((zn=({clickType:n})=>"mousedown"==n,N((function(n,t){var e=0;n.subscribe(new q(t,(function(n){return zn.call(undefined,n,e++)&&t.next(n)})))}))),function(n,t){void 0===t&&(t=kn);var e=function(n,t,e){void 0===n&&(n=0),void 0===e&&(e=An);var r=-1;return null!=t&&(hn(t)?e=t:r=t),new H((function(t){var o,i=(o=n)instanceof Date&&!isNaN(o)?+n-e.now():n;i<0&&(i=0);var u=0;return e.schedule((function(){t.closed||(t.next(u++),0<=r?this.schedule(void 0,r):t.complete())}),i)}))}(100,t);return jn((function(){return e}))}());var zn;let Bn=!1;qn.subscribe({next:({clickType:n,position:t})=>{console.log(n);const{x:e,y:r}=t;Cn.lineTo(e,r),Cn.moveTo(e,r),Cn.stroke()}}),Hn.subscribe({next:({position:n})=>{const{x:t,y:e}=n;Cn.beginPath()}}),Rn.subscribe({next:({position:n})=>{Cn.closePath(),Bn=!0,Cn.stroke()}})})();